<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TaskFlow Pro</title>
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/dashboard.module.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
  </head>
  <body>
    <header class="top-bar glass">
      <button class="btn-primary" onclick="window.location.href='table.html'">
        <i class="fas fa-table"></i> תצוגת טבלה
      </button>
      <div class="logo">TaskFlow <i class="fas fa-bezier-curve"></i></div>
      <div class="controls">
        <span id="user-display">אורח</span>
        <button
          class="btn-secondary"
          onclick="autoLayout()"
          title="סדר את הגרף מחדש משמאל לימין"
        >
          <i class="fas fa-stream"></i> סדר אוטומטי (זמן)
        </button>
        <button class="btn-secondary" onclick="openTaskModal('NEW')">
          + משימה חדשה
        </button>
        <button class="btn-danger" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </header>

    <div id="mynetwork"></div>

    <div class="hint-text">
      <i class="fas fa-mouse-pointer"></i>
      גרירה רגילה להזזה |
      <b>לחצן ימני (גרירה):</b> יצירת חץ בין משימות | דאבל-קליק לעריכה
    </div>

    <div id="context-menu" class="context-menu hidden">
      <div class="menu-item delete" onclick="deleteSelectedEdge()">
        <i class="fas fa-trash-alt"></i> מחק חיבור
      </div>
      <div class="menu-item cancel" onclick="hideContextMenu()">
        <i class="fas fa-times"></i> ביטול
      </div>
    </div>

    <div id="task-modal" class="modal-overlay hidden">
      <div class="modal-content glass">
        <div class="modal-header">
          <h2 id="modal-title">פרטי משימה</h2>
          <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="task-id" />
          <div class="form-group">
            <label>שם המשימה</label>
            <input type="text" id="task-name" />
          </div>

          <div class="form-group">
            <label>פירוט / תיאור המשימה</label>
            <textarea
              id="task-desc"
              rows="4"
              placeholder="פירוט המשימה, יעדים, הערות..."
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>סטטוס</label>
              <select id="task-status">
                <option value="Pending">ממתין</option>
                <option value="In Progress">בביצוע</option>
                <option value="Completed">הושלם</option>
                <option value="Stuck">תקוע</option>
              </select>
            </div>
            <div class="form-group">
              <label>צורה</label>
              <select id="task-shape">
                <option value="box">מלבן</option>
                <option value="ellipse">עיגול</option>
                <option value="database">מסד נתונים</option>
                <option value="diamond">יהלום</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>דד-ליין</label>
              <input type="date" id="task-deadline" />
            </div>
            <div class="form-group">
              <label>שעות</label>
              <input type="number" id="task-hours" />
            </div>
          </div>
          <div class="chat-section">
            <label>תגובות צוות</label>
            <div id="chat-list"></div>
            <div class="chat-input">
              <input type="text" id="chat-msg" placeholder="..." />
              <button onclick="sendNote()">שלח</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-danger" id="btn-delete" onclick="deleteTask()">
            מחק
          </button>
          <button class="btn-primary" onclick="saveTask()">שמור</button>
        </div>
      </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/dashboard.js"></script>
  </body>
</html>
